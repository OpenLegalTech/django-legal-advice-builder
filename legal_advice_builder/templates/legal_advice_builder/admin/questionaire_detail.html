{% extends 'legal_advice_builder/admin/law_case_detail.html' %}
{% load crispy_forms_tags i18n %}

{% block main_content %}
<ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link {% if object == questionaire %} active {% endif %}" id="strucuture-tab" data-bs-toggle="tab" data-bs-target="#structure" type="button"
            role="tab" aria-controls="structure" aria-selected="false">{% trans 'questionaire details' %}</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link {% if object == question %} active {% endif %}" id="questions-tab" data-bs-toggle="tab" data-bs-target="#questions" type="button"
            role="tab" aria-controls="questions" aria-selected="true">{% trans 'questions' %}</button>
    </li>
</ul>
<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade {% if object == questionaire %} show active {% endif %}" id="structure" role="tabpanel" aria-labelledby="structure-tab">
        <form class="border-start border-end border-bottom p-3" action="" method="post">
            {% csrf_token %}
            {{ questionaire_update_form | crispy }}
            <button type="submit" name="questionaire_update" class="btn btn-primary">{% trans 'Save' %}</button>
        </form>
    </div>
    <div class="tab-pane fade {% if object == question %} show active {% endif %}" id="questions" role="tabpanel" aria-labelledby="questions-tab">
        <div class="border-start border-end border-bottom p-3">
            <div class="row mt-3">
                <div class="col-4 pe-0" style="margin-top: 2.5rem;">
                    <ul class="list-group">
                        {% for question in questionaire.questions %}
                            <a href="{% url 'legal_advice_builder:question-update' question.id %}"
                            class="list-group-item list-group-item-action border-0 border-bottom border {% if object == question %}active{% endif %}"
                            >{{ question.text }}</a>
                        {% endfor %}
                        <button class="btn btn-primary mx-1 my-3" type="button" data-bs-toggle="modal" data-bs-target="#newQuestionForm">{% trans 'Add question' %}</button>
                    </ul>
                </div>
                <div class="col ps-0 mb-3">
                    {% block current_form %}{% endblock %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newQuestionForm" tabindex="-1" aria-labelledby="newQuestionFormLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newQuestionFormLabel">{% trans 'Add new question' %}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form action="{% url 'legal_advice_builder:questionaire-detail' questionaire.id %}" method="post">
            <div class="modal-body">
            {% csrf_token %}
            {{ question_create_form | crispy }}
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
            <button type="submit" name="question_create" class="btn btn-primary">{% trans 'Save' %}</button>
            </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
