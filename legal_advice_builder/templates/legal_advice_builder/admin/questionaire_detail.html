{% extends 'legal_advice_builder/admin/law_case_detail.html' %}
{% load crispy_forms_tags i18n %}

{% block main_content %}

<div class="w-100 h-100 border">
    <div class="bg-light p-3 mb-3 border-bottom">
        <small>{% trans 'Questionaire' %}</small>
        <h1 class="fs-3">{{ questionaire.title }}</h1>
        <div class="mt-3">
            <div class="row">
                <div class="col border m-2 p-2">
                    <small>{% trans 'This message is shown if you marked a specific answer to a question as successfull.' %}</small>
                    <div class="my-2">
                        {{ questionaire.success_message }}
                    </div>
                </div>
                <div class="col border m-2 p-2">
                    <small>{% trans 'This message is shown if you marked a specific answer to a question as failure.' %}</small>
                    <div class="my-2">
                    {{ questionaire.failure_message }}
                    </div>
                </div>
                <div class="col border m-2 p-2">
                    <small>{% trans 'This message is shown if you marked a specific answer to a question as unsure.' %}</small>
                    <div class="my-2">
                    {{ questionaire.unsure_message }}
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="p-3">
        <h2 class="fs-3">{% trans 'Questions' %}</h2>
        <div class="row">
            <div class="col-4 pe-0" style="margin-top: 2.5rem;">
                <ul class="list-group">
                    {% for question in questionaire.questions %}
                        <a href="{% url 'legal_advice_builder:question-update' question.id %}"
                        class="list-group-item list-group-item-action border-0 border-bottom border {% if object == question %}active{% endif %}"
                        ><i class="{{ question.icon }}"></i> {{ question.text }}</a>
                    {% endfor %}
                    <button class="btn btn-primary mx-1 my-3" type="button" data-bs-toggle="modal" data-bs-target="#newQuestionForm">{% trans 'Add question' %}</button>
                </ul>
            </div>
            <div class="col ps-0 mb-3">
                {% block current_form %}{% endblock %}
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newQuestionForm" tabindex="-1" aria-labelledby="newQuestionFormLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newQuestionFormLabel">{% trans 'Add new question' %}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form action="{% url 'legal_advice_builder:questionaire-detail' questionaire.id %}" method="post">
            <div class="modal-body">
            {% csrf_token %}
            {{ question_create_form | crispy }}
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
            <button type="submit" name="question_create" class="btn btn-primary">{% trans 'Save' %}</button>
            </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
